(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224],{2388:(e,a,s)=>{"use strict";s.d(a,{A:()=>o});var t=s(5155),l=s(2115),r=s(2355),i=s(3052),n=s(285),c=s(7507);function d(e){let{src:a,alt:s,className:r="",aspectRatio:i="auto"}=e,[n,d]=(0,l.useState)(!1),[o,m]=(0,l.useState)(!0),x=()=>{switch(i){case"square":return"aspect-square";case"video":return"aspect-video";default:return""}};if(!a||n)return(0,t.jsx)("div",{className:"bg-gray-100 flex items-center justify-center ".concat(x()," ").concat(r),children:(0,t.jsx)("div",{className:"text-gray-400 text-center",children:(0,t.jsx)("div",{className:"text-xs",children:"Rasm mavjud emas"})})});let h=(e=>{if(!e)return"";if(e.startsWith("/uploads/"))return"/api/images".concat(e.replace("/uploads/","/"));if(e.startsWith("http"))return e;if(e.includes("uploads/")){let a=e.split("uploads/")[1];return"/api/images/".concat(a)}return e})(a);return(0,t.jsxs)("div",{className:"relative overflow-hidden ".concat(x()," ").concat(r),children:[o&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-pulse text-gray-400 text-xs",children:"Yuklanmoqda..."})}),(0,t.jsx)(c.A,{src:h||"/placeholder.svg",alt:s,width:"100%",height:"100%",className:"w-full !h-full object-cover transition-opacity duration-300 ".concat(o?"opacity-0":"opacity-100"),onLoad:()=>{m(!1),d(!1)},onError:()=>{console.log("Image failed to load:",a),m(!1),d(!0)},loading:"lazy"})]})}function o(e){let{images:a,alt:s,className:o="",aspectRatio:m="video",showDots:x=!0,showArrows:h=!0,autoPlay:u=!1,autoPlayInterval:g=5e3}=e,[p,v]=(0,l.useState)(0),[j,f]=(0,l.useState)(!1),b=(0,l.useRef)(null),y=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!u||j||a.length<=1)return;let e=setInterval(()=>{v(e=>(e+1)%a.length)},g);return()=>clearInterval(e)},[u,g,j,a.length]);let N=(0,l.useCallback)(()=>{v(e=>(e-1+a.length)%a.length)},[a.length]),w=(0,l.useCallback)(()=>{v(e=>(e+1)%a.length)},[a.length]),k=e=>{v(e)};return((0,l.useEffect)(()=>{let e=e=>{"ArrowLeft"===e.key?N():"ArrowRight"===e.key&&w()};if(j)return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[j,w,N]),a&&0!==a.length)?1===a.length?(0,t.jsx)(d,{src:a[0].url,alt:s,className:o,aspectRatio:m}):(0,t.jsxs)("div",{className:"relative overflow-hidden group ".concat(o),onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onTouchStart:e=>{b.current=e.touches[0].clientX},onTouchMove:e=>{y.current=e.touches[0].clientX},onTouchEnd:()=>{if(null===b.current||null===y.current)return;let e=b.current-y.current;Math.abs(e)>50&&(e>0?w():N()),b.current=null,y.current=null},children:[(0,t.jsx)("div",{className:"relative w-full h-full",children:(0,t.jsx)("div",{className:"flex transition-transform duration-300 ease-in-out h-full",style:{transform:"translateX(-".concat(100*p,"%)")},children:(0,t.jsx)(c.A.PreviewGroup,{preview:{onChange:(e,a)=>console.log("current index: ".concat(e,", prev index: ").concat(a))},children:a.map((e,a)=>(0,t.jsx)("div",{className:"w-full h-full flex-shrink-0",children:(0,t.jsx)(d,{src:e.url,alt:"".concat(s," - ").concat(a+1),className:"w-full h-full",aspectRatio:m})},e.id))})})}),h&&a.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.$,{variant:"ghost",size:"icon",className:"absolute left-10 top-1/2 transform -translate-y-1/2 bg-black/50 cursor-pointer text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 h-8 w-8",onClick:N,"aria-label":"Previous Image",children:(0,t.jsx)(r.A,{className:"w-4 h-4"})}),(0,t.jsx)(n.$,{variant:"ghost",size:"icon",className:"absolute right-10 top-1/2 transform -translate-y-1/2 bg-black/50 cursor-pointer text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200 h-8 w-8",onClick:w,"aria-label":"Next Image",children:(0,t.jsx)(i.A,{className:"w-4 h-4"})})]}),x&&a.length>1&&(0,t.jsx)("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 flex space-x-2",children:a.map((e,a)=>(0,t.jsx)("button",{className:"w-2 h-2 rounded-full transition-all duration-200 ".concat(a===p?"bg-white scale-125":"bg-white/50 hover:bg-white/75"),onClick:()=>k(a),"aria-label":"Go to slide ".concat(a+1)},a))}),(0,t.jsxs)("div",{className:"absolute top-5 right-6 bg-black/70 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm",children:[p+1," / ",a.length]})]}):(0,t.jsx)("div",{className:"bg-gray-100 flex items-center justify-center z-40 ".concat(o),children:(0,t.jsx)("div",{className:"text-gray-400 text-center",children:(0,t.jsx)("div",{className:"text-xs",children:"Rasm mavjud emas"})})})}},2657:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6126:(e,a,s)=>{"use strict";s.d(a,{E:()=>c});var t=s(5155);s(2115);var l=s(4624),r=s(2085),i=s(9434);let n=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:a,variant:s,asChild:r=!1,...c}=e,d=r?l.DX:"span";return(0,t.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(n({variant:s}),a),...c})}},6515:(e,a,s)=>{Promise.resolve().then(s.bind(s,7415)),Promise.resolve().then(s.bind(s,4996)),Promise.resolve().then(s.bind(s,6652))},6652:(e,a,s)=>{"use strict";s.d(a,{default:()=>E});var t=s(5155),l=s(2115),r=s(285),i=s(2523),n=s(6695),c=s(6126),d=s(3904),o=s(1154),m=s(7924),x=s(4616),h=s(7213),u=s(2657),g=s(3717),p=s(2525),v=s(8539),j=s(4416),f=s(4229),b=s(5731),y=s(9869),N=s(9946);let w=(0,N.A)("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),k=(0,N.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var A=s(6766);function q(e){let{src:a,alt:s,width:r=400,height:i=300,className:n="",aspectRatio:c="auto"}=e,[d,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!0),u=()=>{switch(c){case"square":return"aspect-square";case"video":return"aspect-video";default:return""}};if(!a||d){let e=((e,a)=>{let s='\n    <svg width="'.concat(e,'" height="').concat(a,'" xmlns="http://www.w3.org/2000/svg">\n      <rect width="100%" height="100%" fill="#f3f4f6"/>\n      <g transform="translate(').concat(e/2,", ").concat(a/2,')">\n        <circle r="24" fill="#d1d5db"/>\n        <path d="M-12,-8 L12,-8 L12,8 L-12,8 Z M-8,-4 L8,-4 L8,4 L-8,4 Z" fill="#9ca3af"/>\n        <circle cx="-4" cy="-1" r="2" fill="#6b7280"/>\n        <path d="M-8,2 L-4,-2 L0,2 L4,-1 L8,3" stroke="#6b7280" strokeWidth="1.5" fill="none"/>\n      </g>\n      <text x="50%" y="75%" textAnchor="middle" fill="#6b7280" fontFamily="Arial, sans-serif" fontSize="14">\n        ').concat(e," \xd7 ").concat(a,"\n      </text>\n    </svg>\n  ");return"data:image/svg+xml;base64,".concat(btoa(s))})(r,i);return(0,t.jsx)("div",{className:"relative overflow-hidden ".concat(u()," ").concat(n),children:(0,t.jsx)(A.default,{src:e||"/placeholder.png",alt:s,className:"w-full h-full object-cover",loading:"lazy"})})}return(0,t.jsxs)("div",{className:"relative overflow-hidden ".concat(u()," ").concat(n),children:[m&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)(h.A,{className:"w-8 h-8 text-gray-400"})})}),(0,t.jsx)(A.default,{src:a||"/placeholder.png",alt:s,className:"w-full h-full object-cover transition-opacity duration-300 ".concat(m?"opacity-0":"opacity-100"),onLoad:()=>{x(!1),o(!1)},onError:()=>{x(!1),o(!0)},loading:"lazy"}),d&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center text-gray-400",children:[(0,t.jsx)(k,{className:"w-8 h-8 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm",children:"Rasm yuklanmadi"})]})})]})}function C(e){let{selectedFiles:a,onFilesChange:s,existingImages:i,onRemoveExisting:c,disabled:d=!1}=e,[o,m]=(0,l.useState)(!1),[u,g]=(0,l.useState)({}),p=(0,l.useRef)(null),v=(0,l.useCallback)(e=>{let a="".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified);if(!u[a]){let s=URL.createObjectURL(e);return g(e=>({...e,[a]:s})),s}return u[a]},[u]),f=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?m(!0):"dragleave"===e.type&&m(!1)},[]),b=(0,l.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),m(!1),!d&&e.dataTransfer.files&&e.dataTransfer.files[0]){let t=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/"));t.length>0&&s([...a,...t])}},[a,s,d]),N=e=>{let t=a[e],l="".concat(t.name,"-").concat(t.size,"-").concat(t.lastModified);u[l]&&(URL.revokeObjectURL(u[l]),g(e=>{let a={...e};return delete a[l],a})),s(a.filter((a,s)=>s!==e))},k=e=>{if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Xona Rasmlari",(0,t.jsx)("span",{className:"text-gray-500 ml-1",children:"(Ixtiyoriy)"})]}),(0,t.jsx)("input",{type:"file",ref:p,onChange:e=>{if(e.target.files&&e.target.files.length>0){let t=Array.from(e.target.files).filter(e=>e.type.startsWith("image/"));t.length>0&&s([...a,...t])}},accept:"image/*",multiple:!0,className:"hidden",disabled:d}),(0,t.jsx)(n.Zp,{className:"border-2 border-dashed transition-all duration-200 cursor-pointer ".concat(o?"border-blue-500 bg-blue-50 scale-[1.02]":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"," ").concat(d?"opacity-50 cursor-not-allowed":""),onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:b,onClick:()=>{p.current&&!d&&p.current.click()},children:(0,t.jsx)(n.Wu,{className:"p-8 text-center",children:(0,t.jsxs)("div",{className:"transition-transform duration-200 ".concat(o?"scale-110":""),children:[(0,t.jsx)(y.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:o?"Rasmlarni bu yerga tashlang":"Rasmlarni yuklash"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Rasmlarni bu yerga tortib tashlang yoki yuklash uchun bosing"}),(0,t.jsxs)(r.$,{type:"button",variant:"outline",disabled:d,className:"pointer-events-none",children:[(0,t.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Rasmlarni tanlash"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"PNG, JPG, JPEG formatlarini qo’llab-quvvatlaydi • Maksimal 10MB"})]})})})]}),a.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center",children:[(0,t.jsx)(w,{className:"w-4 h-4 mr-2"}),"Yangi rasmlar (",a.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map((e,a)=>{let s="".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified),l=v(e);return(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-gray-200",children:(0,t.jsx)(q,{src:l||"",alt:"Preview ".concat(a+1),aspectRatio:"square",className:"w-full h-full"})}),(0,t.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),N(a)},className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-lg transform hover:scale-110",disabled:d,children:(0,t.jsx)(j.A,{className:"w-3 h-3"})}),(0,t.jsx)("div",{className:"absolute bottom-1 left-1 right-1 bg-black/70 text-white text-xs px-2 py-1 rounded truncate",children:e.name.length>20?"".concat(e.name.substring(0,20),"..."):e.name}),(0,t.jsx)("div",{className:"absolute top-1 left-1 bg-green-500 text-white text-xs px-1.5 py-0.5 rounded",children:k(e.size)})]},s)})})]}),i.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center",children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Mavjud rasmlar (",i.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:i.map(e=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-gray-200",children:(0,t.jsx)(q,{src:e.url||"",alt:"Room image ".concat(e.id),aspectRatio:"square",className:"w-full h-full"})}),(0,t.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),c(e.id)},className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-lg transform hover:scale-110",disabled:d,children:(0,t.jsx)(j.A,{className:"w-3 h-3"})}),(0,t.jsx)("div",{className:"absolute bottom-1 left-1 bg-blue-500 text-white text-xs px-2 py-1 rounded",children:"Mavjud"})]},"existing-".concat(e.id)))})]}),0===a.length&&0===i.length&&(0,t.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",children:[(0,t.jsx)(h.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Hozircha rasmlar mavjud emas"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"Yuqoridagi tugma orqali rasmlar qo’shing"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"\uD83D\uDCA1 Maslahatlar:"}),(0,t.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,t.jsx)("li",{children:"• Eng yaxshi sifat uchun 1200x800 piksel yoki undan yuqori o’lchamdagi rasmlar ishlating"}),(0,t.jsx)("li",{children:"• Birinchi rasm asosiy rasm sifatida ko’rsatiladi"}),(0,t.jsx)("li",{children:"• Bir vaqtda bir nechta rasmlarni yuklashingiz mumkin"}),(0,t.jsx)("li",{children:"• Qo’llab-quvvatlanadigan formatlar: JPG, PNG, JPEG"})]})]})]})}function S(e){let{room:a,onClose:s}=e,[d,m]=(0,l.useState)({title:"",description:"",price:"",categoryId:0,amenities:[],files:[]}),[h,u]=(0,l.useState)([]),[g,p]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!0),[w,k]=(0,l.useState)(""),[A,q]=(0,l.useState)(""),[S,z]=(0,l.useState)([]),[L,R]=(0,l.useState)([]),[M,E]=(0,l.useState)([]),D=(0,l.useCallback)(async()=>{N(!0);try{let e=await b.Vn.getAllCategories();e.success&&e.data&&(u(e.data),!a&&e.data&&e.data.length>0&&m(a=>({...a,categoryId:e.data[0].id})))}catch(e){console.error("Failed to load categories:",e)}finally{N(!1)}},[a]);(0,l.useEffect)(()=>{D(),a&&(m({title:a.title,description:a.description,price:a.price,categoryId:a.categoryId,amenities:[...a.amenities],files:[]}),a.images&&a.images.length>0&&R(a.images))},[a,D]);let I=async e=>{if(e.preventDefault(),p(!0),q(""),!d.title.trim()){q("Xona nomi majburiy"),p(!1);return}if(!d.price.trim()){q("Narx majburiy"),p(!1);return}if(0===d.categoryId){q("Kategoriya tanlash majburiy"),p(!1);return}try{let e,t={...d,files:S};(e=a?await b.Nw.updateRoom(a.id,{...t,deleteImages:M.length>0?M:void 0}):await b.Nw.createRoom(t)).success?(alert(a?"Xona muvaffaqiyatli yangilandi!":"Yangi xona muvaffaqiyatli qo'shildi!"),s()):q(e.error||"Ma'lumotlarni saqlashda xatolik")}catch(e){console.error(e),q("Serverga ulanishda xatolik")}finally{p(!1)}},P=()=>{w.trim()&&!d.amenities.includes(w.trim())&&(m({...d,amenities:[...d.amenities,w.trim()]}),k(""))},X=e=>{m({...d,amenities:d.amenities.filter(a=>a!==e)})};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(n.Zp,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(n.ZB,{className:"text-xl",children:a?"Xonani Tahrirlash":"Yangi Xona Qo'shish"}),(0,t.jsx)(r.$,{variant:"ghost",size:"icon",onClick:s,children:(0,t.jsx)(j.A,{className:"w-4 h-4"})})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[A&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:A}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Xona Nomi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(i.p,{value:d.title,onChange:e=>m({...d,title:e.target.value}),placeholder:"Masalan: Deluxe Suite",required:!0,disabled:g})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kategoriya ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:d.categoryId,onChange:e=>m({...d,categoryId:Number.parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:g||y,children:[(0,t.jsx)("option",{value:0,children:"Kategoriya tanlang"}),h.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),y&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kategoriyalar yuklanmoqda..."})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Narx (so‘m/kecha)"," ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(i.p,{value:d.price,onChange:e=>m({...d,price:e.target.value}),placeholder:"Masalan: 150,000",required:!0,disabled:g}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Faqat raqam va vergul ishlatishingiz mumkin"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tavsif"}),(0,t.jsx)(v.T,{value:d.description,onChange:e=>m({...d,description:e.target.value}),placeholder:"Xona haqida batafsil ma'lumot...",rows:4,disabled:g})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Qulayliklar"}),(0,t.jsxs)("div",{className:"flex space-x-2 mb-3",children:[(0,t.jsx)(i.p,{value:w,onChange:e=>k(e.target.value),placeholder:"Yangi qulaylik qo'shish",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),P())},disabled:g}),(0,t.jsx)(r.$,{type:"button",onClick:P,size:"icon",variant:"outline",disabled:g,children:(0,t.jsx)(x.A,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:d.amenities.map((e,a)=>(0,t.jsxs)(c.E,{variant:"secondary",className:"cursor-pointer hover:bg-red-100",onClick:()=>!g&&X(e),children:[e," ",(0,t.jsx)(j.A,{className:"w-3 h-3 ml-1"})]},a))}),0===d.amenities.length&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"WiFi, TV, Konditsioner kabi qulayliklarni qo‘shing"})]}),(0,t.jsx)(C,{selectedFiles:S,onFilesChange:e=>{z(e)},existingImages:L,onRemoveExisting:e=>{R(a=>a.filter(a=>a.id!==e)),E(a=>[...a,e])},disabled:g}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[(0,t.jsx)(r.$,{variant:"outline",type:"button",onClick:s,disabled:g,children:"Bekor qilish"}),(0,t.jsx)(r.$,{type:"submit",disabled:g||0===d.categoryId,className:"bg-blue-600 hover:bg-blue-700",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saqlanmoqda..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Saqlash"]})})]})]})})]})})}var z=s(3332),L=s(9074),R=s(2388);function M(e){var a,s,l;let{room:i,onClose:d,onEdit:o}=e;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(n.Zp,{className:"w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between border-b",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.ZB,{className:"text-2xl",children:i.title}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Xona ID: ",i.id]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[o&&(0,t.jsxs)(r.$,{variant:"outline",onClick:o,children:[(0,t.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Tahrirlash"]}),(0,t.jsx)(r.$,{variant:"ghost",size:"icon",onClick:d,children:(0,t.jsx)(j.A,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)(n.Wu,{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-xl",children:[(0,t.jsx)(R.A,{images:i.images||[],alt:i.title,className:"w-full h-80",showArrows:!0,showDots:!0,autoPlay:!0,autoPlayInterval:5e3}),(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsx)(c.E,{className:"bg-blue-600 text-white shadow-lg",children:(null==(a=i.category)?void 0:a.name)||"Kategoriasiz"})})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center space-x-3 p-4 bg-green-50 rounded-lg",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Narx"}),(0,t.jsxs)("p",{className:"font-bold text-lg text-green-600",children:[i.price," so’m/kecha"]})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)(z.A,{className:"w-6 h-6 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Kategoriya"}),(0,t.jsx)("p",{className:"font-semibold",children:(null==(s=i.category)?void 0:s.name)||"Belgilanmagan"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-purple-50 rounded-lg",children:[(0,t.jsx)(L.A,{className:"w-6 h-6 text-purple-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Yaratilgan"}),(0,t.jsx)("p",{className:"font-semibold",children:new Date(i.createdAt).toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-orange-50 rounded-lg",children:[(0,t.jsx)(h.A,{className:"w-6 h-6 text-orange-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Rasmlar"}),(0,t.jsxs)("p",{className:"font-semibold",children:[(null==(l=i.images)?void 0:l.length)||0," ta"]})]})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-3 text-lg",children:"Tavsif"}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-gray-700 leading-relaxed",children:i.description||"Bu xona uchun tavsif mavjud emas."})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Qulayliklar"}),i.amenities.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:i.amenities.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e})]},a))}):(0,t.jsx)("p",{className:"text-gray-500 bg-gray-50 p-4 rounded-lg",children:"Qulayliklar haqida ma’lumot mavjud emas."})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"Texnik Ma’lumotlar"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"ID:"}),(0,t.jsx)("span",{className:"font-mono font-medium",children:i.id})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Kategoriya ID:"}),(0,t.jsx)("span",{className:"font-mono font-medium",children:i.categoryId})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Yaratilgan:"}),(0,t.jsx)("span",{className:"font-medium",children:new Date(i.createdAt).toLocaleString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Yangilangan:"}),(0,t.jsx)("span",{className:"font-medium",children:new Date(i.updatedAt).toLocaleString()})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t",children:[o&&(0,t.jsxs)(r.$,{onClick:o,className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"Tahrirlash"]}),(0,t.jsx)(r.$,{variant:"outline",onClick:d,children:"Yopish"})]})]})]})})}function E(){let[e,a]=(0,l.useState)([]),[s,v]=(0,l.useState)(!1),[j,f]=(0,l.useState)(""),[y,N]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[A,q]=(0,l.useState)(null),[C,z]=(0,l.useState)(null),[L,E]=(0,l.useState)("");(0,l.useEffect)(()=>{D()},[]);let D=async()=>{v(!0),E("");try{let e=await b.Nw.getAllRooms();e.success&&e.data?(console.log("Loaded rooms:",e.data),a(e.data)):E(e.error||"Xonalarni yuklashda xatolik")}catch(e){console.error("Error loading rooms:",e),E("Serverga ulanishda xatolik")}finally{v(!1)}},I=async s=>{if(confirm("Haqiqatan ham bu xonani o'chirmoqchimisiz?"))try{let t=await b.Nw.deleteRoom(s);t.success?(a(e.filter(e=>e.id!==s)),alert("Xona muvaffaqiyatli o'chirildi")):alert("Xatolik: "+(t.error||"Xonani o'chirishda xatolik"))}catch(e){console.error(e),alert("Serverga ulanishda xatolik")}},P=e=>{q(e),N(!0)},X=e=>{z(e),k(!0)},$=()=>{q(null),N(!0)},B=e.filter(e=>{var a;return e.title.toLowerCase().includes(j.toLowerCase())||e.description.toLowerCase().includes(j.toLowerCase())||(null==(a=e.category)?void 0:a.name.toLowerCase().includes(j.toLowerCase()))});return L?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-red-600 mb-4 text-lg",children:L}),(0,t.jsxs)(r.$,{onClick:D,variant:"outline",size:"lg",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Qayta urinish"]})]}):s?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(o.A,{className:"w-12 h-12 animate-spin mx-auto mb-4 text-blue-600"}),(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"Xonalar yuklanmoqda..."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)(i.p,{placeholder:"Xonalarni qidirish...",className:"pl-10 w-80",value:j,onChange:e=>f(e.target.value)})]}),(0,t.jsx)(r.$,{onClick:D,variant:"outline",size:"icon",children:(0,t.jsx)(d.A,{className:"w-4 h-4"})})]}),(0,t.jsxs)(r.$,{onClick:$,className:"bg-blue-600 hover:bg-blue-700",size:"lg",children:[(0,t.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Yangi Xona"]})]}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.map(e=>{var a,s;return(0,t.jsxs)(n.Zp,{className:"overflow-hidden hover:shadow-xl transition-all duration-300 group",children:[(0,t.jsx)(n.aR,{className:"p-0",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(R.A,{images:e.images||[],alt:e.title,aspectRatio:"video",className:"group-hover:scale-105 transition-transform duration-300",showArrows:!0,showDots:!0,autoPlay:!1}),(0,t.jsx)("div",{className:"absolute top-3 left-3",children:(0,t.jsx)(c.E,{className:"bg-blue-600 hover:bg-blue-700 shadow-lg",children:(null==(a=e.category)?void 0:a.name)||"Kategoriasiz"})})]})}),(0,t.jsxs)(n.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 truncate flex-1 text-lg",children:e.title}),(0,t.jsxs)("div",{className:"text-right ml-3",children:[(0,t.jsx)("div",{className:"text-xl font-bold text-blue-600",children:e.price}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"so‘m/kecha"})]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2 leading-relaxed",children:e.description}),(0,t.jsxs)("div",{className:"space-y-3 text-sm text-gray-600 mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Yaratilgan:"}),(0,t.jsx)("span",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"ID:"}),(0,t.jsx)("span",{className:"font-mono text-xs",children:e.id})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Rasmlar:"}),(0,t.jsxs)("span",{className:"font-medium flex items-center",children:[(0,t.jsx)(h.A,{className:"w-3 h-3 mr-1"}),(null==(s=e.images)?void 0:s.length)||0]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Qulayliklar:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.amenities.slice(0,2).map((e,a)=>(0,t.jsx)(c.E,{variant:"outline",className:"text-xs",children:e},a)),e.amenities.length>2&&(0,t.jsxs)(c.E,{variant:"outline",className:"text-xs",children:["+",e.amenities.length-2]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(r.$,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>X(e),children:[(0,t.jsx)(u.A,{className:"w-3 h-3 mr-1"}),"Ko‘rish"]}),(0,t.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>P(e),children:(0,t.jsx)(g.A,{className:"w-3 h-3"})}),(0,t.jsx)(r.$,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>I(e.id),children:(0,t.jsx)(p.A,{className:"w-3 h-3"})})]})]})]},e.id)})}),0===B.length&&!s&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(h.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:j?"Qidiruv bo'yicha xonalar topilmadi":"Hozircha xonalar mavjud emas"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:j?"Boshqa kalit so'zlar bilan qidiring":"Birinchi xonangizni qo'shing"}),!j&&(0,t.jsxs)(r.$,{onClick:$,className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(x.A,{className:"w-4 h-4 mr-2"}),"Yangi Xona Qo‘shish"]})]}),y&&(0,t.jsx)(S,{room:A,onClose:()=>{N(!1),q(null),D()}}),w&&C&&(0,t.jsx)(M,{room:C,onClose:()=>{k(!1),z(null)}})]})}},8539:(e,a,s)=>{"use strict";s.d(a,{T:()=>r});var t=s(5155);s(2115);var l=s(9434);function r(e){let{className:a,...s}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,l.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...s})}},9869:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(9946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[723,535,244,800,711,100,441,684,358],()=>a(6515)),_N_E=e.O()}]);