(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876],{2020:(e,a,l)=>{"use strict";l.d(a,{default:()=>p});var t=l(5155),s=l(2115),r=l(285),i=l(2523),n=l(6695),c=l(3904),o=l(1154),d=l(7924),u=l(4616),m=l(3717),h=l(2525),x=l(4416),f=l(4229),y=l(5731);function p(){let[e,a]=(0,s.useState)([]),[l,p]=(0,s.useState)(!1),[j,g]=(0,s.useState)(""),[v,N]=(0,s.useState)(!1),[b,k]=(0,s.useState)(null),[w,C]=(0,s.useState)({name:""}),[A,S]=(0,s.useState)(!1),[q,$]=(0,s.useState)("");(0,s.useEffect)(()=>{K()},[]);let K=async()=>{p(!0),$("");try{let e=await y.Vn.getAllCategories();e.success&&e.data?a(e.data):$(e.error||"Kategoriyalarni yuklashda xatolik")}catch(e){console.error(e),$("Serverga ulanishda xatolik")}finally{p(!1)}},E=async l=>{if(confirm("Haqiqatan ham bu kategoriyani o'chirmoqchimisiz?"))try{let t=await y.Vn.deleteCategory(l);t.success?(a(e.filter(e=>e.id!==l)),alert("Kategoriya muvaffaqiyatli o'chirildi")):alert("Xatolik: "+(t.error||"Kategoriyani o'chirishda xatolik"))}catch(e){console.error(e),alert("Serverga ulanishda xatolik")}},_=e=>{k(e),C({name:e.name}),N(!0)},D=async e=>{if(e.preventDefault(),S(!0),$(""),!w.name.trim()){$("Kategoriya nomi majburiy"),S(!1);return}try{let e;(e=b?await y.Vn.updateCategory(b.id,w):await y.Vn.createCategory(w)).success?(alert(b?"Kategoriya muvaffaqiyatli yangilandi!":"Yangi kategoriya muvaffaqiyatli qo'shildi!"),N(!1),k(null),C({name:""}),K()):$(e.error||"Ma'lumotlarni saqlashda xatolik")}catch(e){console.error(e),$("Serverga ulanishda xatolik")}finally{S(!1)}},O=()=>{N(!1),k(null),C({name:""}),$("")},V=e.filter(e=>e.name.toLowerCase().includes(j.toLowerCase()));return q&&!v?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"text-red-600 mb-4",children:q}),(0,t.jsxs)(r.$,{onClick:K,variant:"outline",children:[(0,t.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Qayta urinish"]})]}):l?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(o.A,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{children:"Kategoriyalar yuklanmoqda..."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)(i.p,{placeholder:"Kategoriyalarni qidirish...",className:"pl-10 w-80",value:j,onChange:e=>g(e.target.value)})]}),(0,t.jsx)(r.$,{onClick:K,variant:"outline",size:"icon",children:(0,t.jsx)(c.A,{className:"w-4 h-4"})})]}),(0,t.jsxs)(r.$,{onClick:()=>{k(null),C({name:""}),N(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[(0,t.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Yangi Kategoriya"]})]}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(e=>(0,t.jsxs)(n.Zp,{className:"hover:shadow-lg transition-shadow duration-300",children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{className:"text-lg",children:e.name})}),(0,t.jsxs)(n.Wu,{children:[(0,t.jsxs)("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[(0,t.jsxs)("p",{children:["ID: ",(0,t.jsx)("span",{className:"font-mono",children:e.id})]}),(0,t.jsxs)("p",{children:["Yaratilgan:"," ",(0,t.jsx)("span",{className:"font-medium",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsxs)("p",{children:["Yangilangan:"," ",(0,t.jsx)("span",{className:"font-medium",children:new Date(e.updatedAt).toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(r.$,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>_(e),children:[(0,t.jsx)(m.A,{className:"w-3 h-3 mr-1"}),"Tahrirlash"]}),(0,t.jsx)(r.$,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>E(e.id),children:(0,t.jsx)(h.A,{className:"w-3 h-3"})})]})]})]},e.id))}),0===V.length&&!l&&(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:j?"Qidiruv bo'yicha kategoriyalar topilmadi":"Hozircha kategoriyalar mavjud emas"})}),v&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)(n.Zp,{className:"w-full max-w-md",children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(n.ZB,{children:b?"Kategoriyani Tahrirlash":"Yangi Kategoriya Qo'shish"}),(0,t.jsx)(r.$,{variant:"ghost",size:"icon",onClick:O,children:(0,t.jsx)(x.A,{className:"w-4 h-4"})})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[q&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:q}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kategoriya Nomi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(i.p,{value:w.name,onChange:e=>C({name:e.target.value}),placeholder:"Masalan: Standart Xonalar",required:!0,disabled:A})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)(r.$,{variant:"outline",type:"button",onClick:O,disabled:A,children:"Bekor qilish"}),(0,t.jsx)(r.$,{type:"submit",disabled:A,className:"bg-blue-600 hover:bg-blue-700",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saqlanmoqda..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Saqlash"]})})]})]})})]})})]})}},2085:(e,a,l)=>{"use strict";l.d(a,{F:()=>i});var t=l(2596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=t.$,i=(e,a)=>l=>{var t;if((null==a?void 0:a.variants)==null)return r(e,null==l?void 0:l.class,null==l?void 0:l.className);let{variants:i,defaultVariants:n}=a,c=Object.keys(i).map(e=>{let a=null==l?void 0:l[e],t=null==n?void 0:n[e];if(null===a)return null;let r=s(a)||s(t);return i[e][r]}),o=l&&Object.entries(l).reduce((e,a)=>{let[l,t]=a;return void 0===t||(e[l]=t),e},{});return r(e,c,null==a||null==(t=a.compoundVariants)?void 0:t.reduce((e,a)=>{let{class:l,className:t,...s}=a;return Object.entries(s).every(e=>{let[a,l]=e;return Array.isArray(l)?l.includes({...n,...o}[a]):({...n,...o})[a]===l})?[...e,l,t]:e},[]),null==l?void 0:l.class,null==l?void 0:l.className)}},2383:(e,a,l)=>{Promise.resolve().then(l.bind(l,7415)),Promise.resolve().then(l.bind(l,4996)),Promise.resolve().then(l.bind(l,2020))},3904:(e,a,l)=>{"use strict";l.d(a,{A:()=>t});let t=(0,l(9946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4416:(e,a,l)=>{"use strict";l.d(a,{A:()=>t});let t=(0,l(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4624:(e,a,l)=>{"use strict";l.d(a,{DX:()=>n,TL:()=>i});var t=l(2115);function s(e,a){if("function"==typeof e)return e(a);null!=e&&(e.current=a)}var r=l(5155);function i(e){let a=function(e){let a=t.forwardRef((e,a)=>{let{children:l,...r}=e;if(t.isValidElement(l)){var i;let e,n,c=(i=l,(n=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(n=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),o=function(e,a){let l={...a};for(let t in a){let s=e[t],r=a[t];/^on[A-Z]/.test(t)?s&&r?l[t]=(...e)=>{let a=r(...e);return s(...e),a}:s&&(l[t]=s):"style"===t?l[t]={...s,...r}:"className"===t&&(l[t]=[s,r].filter(Boolean).join(" "))}return{...e,...l}}(r,l.props);return l.type!==t.Fragment&&(o.ref=a?function(...e){return a=>{let l=!1,t=e.map(e=>{let t=s(e,a);return l||"function"!=typeof t||(l=!0),t});if(l)return()=>{for(let a=0;a<t.length;a++){let l=t[a];"function"==typeof l?l():s(e[a],null)}}}}(a,c):c),t.cloneElement(l,o)}return t.Children.count(l)>1?t.Children.only(null):null});return a.displayName=`${e}.SlotClone`,a}(e),l=t.forwardRef((e,l)=>{let{children:s,...i}=e,n=t.Children.toArray(s),c=n.find(o);if(c){let e=c.props.children,s=n.map(a=>a!==c?a:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,r.jsx)(a,{...i,ref:l,children:t.isValidElement(e)?t.cloneElement(e,void 0,s):null})}return(0,r.jsx)(a,{...i,ref:l,children:s})});return l.displayName=`${e}.Slot`,l}var n=i("Slot"),c=Symbol("radix.slottable");function o(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}}},e=>{var a=a=>e(e.s=a);e.O(0,[723,535,244,711,100,441,684,358],()=>a(2383)),_N_E=e.O()}]);